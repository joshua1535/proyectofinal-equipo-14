(this["webpackJsonpfinal-proyect"]=this["webpackJsonpfinal-proyect"]||[]).push([[0],[,,,,,,,function(e,t,n){e.exports={"section-container":"Admin_section-container__33v1k","admin-container":"Admin_admin-container__cA9tD","header-admin":"Admin_header-admin__1mzxB","header-admin__logo":"Admin_header-admin__logo__3bQ-g","logout-container":"Admin_logout-container__2aaxh","logo-header":"Admin_logo-header__14_Od","title-header":"Admin_title-header__1J0zk","user-title":"Admin_user-title__2KPvu","form-createPost":"Admin_form-createPost__8lfG8","createPost-title":"Admin_createPost-title__1kGgW","input-container":"Admin_input-container__30__n","description-input":"Admin_description-input__2RIAX","title-section":"Admin_title-section__2wtK8","title-input":"Admin_title-input__3pz4E","container-createPost_button":"Admin_container-createPost_button__28qqO","button-createPost":"Admin_button-createPost__2S-zD","toast-notification-container":"Admin_toast-notification-container__32bBm","toast-notification-text-container":"Admin_toast-notification-text-container__14Opl"}},,,function(e,t,n){e.exports={update:"UpdatePost_update__3pfwS","update-container":"UpdatePost_update-container__3NX3Q","header-update":"UpdatePost_header-update__3C1jX","header-update__logo":"UpdatePost_header-update__logo__wviWa","logout-container":"UpdatePost_logout-container__1pNzU","logo-header":"UpdatePost_logo-header__2NKQ-","title-header":"UpdatePost_title-header__3NCev","user-title":"UpdatePost_user-title__26PQv","header-update-title":"UpdatePost_header-update-title__1acV4","update-title":"UpdatePost_update-title__3o-FX","form-createPost":"UpdatePost_form-createPost__oD7d8","createPost-title":"UpdatePost_createPost-title__2S35M","input-container":"UpdatePost_input-container__1ocX9","description-input":"UpdatePost_description-input__2EyvQ","title-section":"UpdatePost_title-section__hRiAl","title-input":"UpdatePost_title-input__3kMa5","container-createPost_button":"UpdatePost_container-createPost_button__3gjHd","button-createPost":"UpdatePost_button-createPost__ebOIR","button-cancel-createPost":"UpdatePost_button-cancel-createPost__1esgp"}},function(e,t,n){e.exports={ownposts:"OwnPosts_ownposts__2qFoZ","header-ownposts":"OwnPosts_header-ownposts__3Rw1F","header-ownposts__logo":"OwnPosts_header-ownposts__logo__15CyJ","logout-container":"OwnPosts_logout-container__NJT1C","logo-header":"OwnPosts_logo-header__2taji","title-header":"OwnPosts_title-header__1fjKA","header-ownposts-title":"OwnPosts_header-ownposts-title__ftwLY","user-title":"OwnPosts_user-title__m6EyY","ownposts-container":"OwnPosts_ownposts-container__1xl9r"}},function(e,t,n){e.exports={"toast-notification-container":"PostCard_toast-notification-container__1XSRu","toast-notification-text-container":"PostCard_toast-notification-text-container__AmiQ1","posts-container-general":"PostCard_posts-container-general__1ZKEL","username-post-container":"PostCard_username-post-container__disaD","title-post-container":"PostCard_title-post-container__1hdGI","img-post-container":"PostCard_img-post-container__CGR4t","description-post-container":"PostCard_description-post-container__239MJ","footer-post-container":"PostCard_footer-post-container__cLIJ8","likes-container":"PostCard_likes-container__2__WC","comments-container":"PostCard_comments-container__1mRQf","fav-container":"PostCard_fav-container__2_4_U","lenght-container":"PostCard_lenght-container__177Rd","title-add-comment":"PostCard_title-add-comment__1eaZT","container-add-comment":"PostCard_container-add-comment__3MqGJ","form-add-comment":"PostCard_form-add-comment__pQCYA","input-add-comment":"PostCard_input-add-comment__2Wbr5","post-comment":"PostCard_post-comment__2YNZT","button-add-comment":"PostCard_button-add-comment__3tBNV"}},function(e,t,n){e.exports={favorites:"Favorites_favorites__3QR4x","header-favorites":"Favorites_header-favorites__3mxEC","header-favorites__logo":"Favorites_header-favorites__logo__vFTsz","logout-container":"Favorites_logout-container__Q0dkg","logo-header":"Favorites_logo-header__1zFnx","title-header":"Favorites_title-header__2dYWJ","header-favorites-title":"Favorites_header-favorites-title__3Znwe","user-title":"Favorites_user-title__3jJqu","favorites-container":"Favorites_favorites-container__3NPFX"}},function(e,t,n){e.exports={"section-container":"User_section-container__TO1jW","user-container":"User_user-container__3dFuP","header-user":"User_header-user__1Q5Mp","header-user__logo":"User_header-user__logo__Pu3Dw","logout-container":"User_logout-container__1LYba","logo-header":"User_logo-header__KsjIf","title-header":"User_title-header__5ld6t","user-title":"User_user-title__1KuKV"}},function(e,t,n){e.exports={"logo-header":"Login_logo-header__1mHFY","title-header":"Login_title-header__23-Ky","login-container":"Login_login-container__MoS_K","main-container":"Login_main-container__1Xc9X","section-login":"Login_section-login__UW_zI",form:"Login_form__3bufY",h2:"Login_h2__1YBkx","login-img":"Login_login-img__1lvET","login-images":"Login_login-images__2Ahm8","logo-container":"Login_logo-container__2Za1g","login-input":"Login_login-input__34mfL","error-login":"Login_error-login__1pMm8","login-button":"Login_login-button__1NeW3","form-footer":"Login_form-footer__dkH_N","footer-text-login":"Login_footer-text-login__yZsgt"}},,,,,function(e,t,n){e.exports={"container-notfound":"NotFound_container-notfound__108PE","title-notfound":"NotFound_title-notfound__3sbC6","img-notfound":"NotFound_img-notfound__3baB7",notfound:"NotFound_notfound__2tgqV","text-notfound-container":"NotFound_text-notfound-container__1jHWz","text-notfound":"NotFound_text-notfound__1tWYr","subtext-notfound":"NotFound_subtext-notfound__fTI4Y","button-notfound":"NotFound_button-notfound__2jR6y"}},,,,,,,,,,,,,,,,,function(e,t,n){},,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),o=n(28),s=n.n(o),r=(n(37),n(3)),i=n.n(r),l=n(5),u=n(6),d=n(8),j=n(16),m="https://posts-pw2021.herokuapp.com/api/v1",x={login:function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/auth/signin"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({username:t,password:n})});case 2:if(!(a=e.sent).ok){e.next=8;break}return e.next=6,a.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),verifyToken:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/auth/whoami"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=n(1),b=c.a.createContext(),O=function(e){var t=Object(a.useState)(void 0),n=Object(u.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(void 0),r=Object(u.a)(s,2),d=r[0],m=r[1];Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=f())){e.next=8;break}return e.next=4,x.verifyToken(t);case 4:n=e.sent,a=n.username,c=n.role,a&&c&&(m({username:a,role:c}),O(t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[c]);var O=function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token"),o(e)},h=Object(a.useCallback)((function(e,t){var n=function(){var n=Object(l.a)(i.a.mark((function n(){var a,c,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=!1,n.prev=1,n.next=4,x.login(e,t);case 4:c=n.sent,(o=c.token)&&(O(o),a=!0),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0),console.error("Error in login");case 13:return n.prev=13,n.abrupt("return",a);case 16:case"end":return n.stop()}}),n,null,[[1,9,13,16]])})));return function(){return n.apply(this,arguments)}}();return n()}),[]),v=Object(a.useCallback)((function(){m(void 0),O(void 0)}),[]),_=Object(a.useMemo)((function(){return{token:c,user:d,login:h,logout:v}}),[c,d,h,v]);return Object(p.jsx)(b.Provider,Object(j.a)({value:_},e))},h=function(){var e=c.a.useContext(b);if(!e)throw new Error("useUserContext() isn't inside of UserProvider");return e},f=function(){return localStorage.getItem("token")},v=n(15),_=n.n(v),g=n.p+"static/media/Solo_logo.0403dc93.png",N=n.p+"static/media/Login-Images.6f217f43.png";function P(){var e=h(),t=e.login,n=e.token,c=Object(a.useState)(""),o=Object(u.a)(c,2),s=o[0],r=o[1],j=Object(a.useState)(""),m=Object(u.a)(j,2),x=m[0],b=m[1],O=Object(a.useState)(!1),f=Object(u.a)(O,2),v=f[0],P=f[1],k=function(e,t){t(e.target.value)},w=function(){var e=Object(l.a)(i.a.mark((function e(n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(s,x);case 3:a=e.sent,P(!a),r(""),b("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(p.jsx)(d.a,{replace:!0,to:"/redirect"}):Object(p.jsxs)("div",{className:_.a["login-page"],children:[Object(p.jsxs)("header",{children:[Object(p.jsx)("img",{className:_.a["logo-header"],src:g,alt:"logo"}),Object(p.jsx)("p",{className:_.a["title-header"],children:" One Moment "})]}),Object(p.jsx)("div",{className:_.a["login-container"],children:Object(p.jsxs)("div",{className:_.a["section-login"],children:[Object(p.jsx)("div",{className:_.a["login-images"],children:Object(p.jsxs)("div",{className:_.a["img-login-container"],children:[Object(p.jsx)("img",{className:_.a["login-img"],src:N,alt:"login-img"}),Object(p.jsx)("h2",{children:" Inicia sesi\xf3n y descubre todas las novedades para todos los usuarios"})]})}),Object(p.jsxs)("main",{className:_.a["main-container"],children:[Object(p.jsxs)("form",{onSubmit:w,className:_.a.form,children:[Object(p.jsx)("h2",{className:_.a.h2,children:" One Social Moment "}),v&&Object(p.jsx)("p",{className:_.a["error-login"],children:"Un error ha ocurrido en el inicio de sesi\xf3n"}),Object(p.jsx)("input",{className:_.a["login-input"],type:"text",value:s,placeholder:"e.g. username",onChange:function(e){return k(e,r)}}),Object(p.jsx)("input",{className:_.a["login-input"],type:"password",placeholder:"e.g password",onChange:function(e){return k(e,b)},value:x}),Object(p.jsxs)("button",{className:_.a["login-button"],children:[" ",Object(p.jsx)("img",{className:_.a["logo-header"],src:g,alt:"logo"})," Sign In "]})]}),Object(p.jsx)("div",{className:_.a["footer-text-login"],children:Object(p.jsx)("div",{className:_.a["text-login-container"],children:Object(p.jsx)("p",{className:_.a["text-login"],children:" \xbfNo recuerdas tus credenciales? Fueron enviadas a tu correo personal. "})})})]})]})})]})}var k={admin:"/admin",user:"/user"},w=function(){var e,t=h().user;return t?Object(p.jsx)(d.a,{replace:!0,to:null!==(e=k[t.role])&&void 0!==e?e:"/"}):Object(p.jsx)("p",{children:" No se puede redireccionar "})},S=n(20),T=n.n(S),C=n.p+"static/media/Error-NotFound.e2cf0f70.png",I=function(){var e=Object(d.g)();return Object(p.jsxs)("div",{className:T.a["container-notfound"],children:[Object(p.jsx)("h2",{className:T.a["title-notfound"],children:"ERROR 404"}),Object(p.jsxs)("div",{className:T.a.notfound,children:[Object(p.jsx)("img",{className:T.a["img-notfound"],src:C,alt:"error"}),Object(p.jsxs)("div",{className:T.a["text-notfound-container"],children:[Object(p.jsx)("h3",{className:T.a["text-notfound"],children:"Parece que has intentado ingresar a una p\xe1gina que no existe o est\xe1 en mantenimiento"}),Object(p.jsx)("p",{className:T.a["subtext-notfound"],children:"Perdona las molestias. Dir\xedgete a la p\xe1gina principal o intenta colocar correctamente la direcci\xf3n de la p\xe1gina."}),Object(p.jsx)("button",{className:T.a["button-notfound"],onClick:function(t){e("/login")},children:"Ir a la p\xe1gina principal"})]})]})]})},y="https://posts-pw2021.herokuapp.com/api/v1",E={createPost:function(){var e=Object(l.a)(i.a.mark((function e(t,n,a,c){var o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/post/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-type":"application/json"},body:JSON.stringify({title:n,description:a,image:c})});case 2:if(!(o=e.sent).ok){e.next=8;break}return e.next=6,o.json();case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),getOwnedPosts:function(){var e=Object(l.a)(i.a.mark((function e(t,n,a){var c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/post/owned?limit=").concat(n,"&page=").concat(a),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(c=e.sent).ok){e.next=8;break}return e.next=6,c.json();case 6:return o=e.sent,e.abrupt("return",o.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),updatePost:function(){var e=Object(l.a)(i.a.mark((function e(t,n,a,c,o){var s,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/post/update/").concat(n),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-type":"application/json"},body:JSON.stringify({title:a,description:c,image:o})});case 2:if(!(s=e.sent).ok){e.next=8;break}return e.next=6,s.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,c,o){return e.apply(this,arguments)}}(),toggleActivePost:function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/post/toggle/").concat(n),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(a=e.sent).ok){e.next=8;break}return e.next=6,a.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getAllPosts:function(){var e=Object(l.a)(i.a.mark((function e(t,n,a){var c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/post/all?limit=").concat(n,"&page=").concat(a),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(c=e.sent).ok){e.next=8;break}return e.next=6,c.json();case 6:return o=e.sent,e.abrupt("return",o.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),getAllFavorite:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:return n=e.sent,a=n.favorites.map((function(e){return R(t,e)})),e.next=6,Promise.all(a);case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOnePost:function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/post/one/").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(a=e.sent).ok){e.next=8;break}return e.next=6,a.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),like:function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/post/like/").concat(n),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(a=e.sent).ok){e.next=8;break}return e.next=6,a.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),favorite:function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/post/fav/").concat(n),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(a=e.sent).ok){e.next=8;break}return e.next=6,a.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addComment:function(){var e=Object(l.a)(i.a.mark((function e(t,n,a){var c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/post/comment/").concat(n),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-type":"application/json"},body:JSON.stringify({description:a})});case 2:if(!(c=e.sent).ok){e.next=8;break}return e.next=6,c.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},A=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/post/fav"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/post/one/").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(a=e.sent).ok){e.next=8;break}return e.next=6,a.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=n(27);function U(e,t,n){var c=Object(a.useState)(!0),o=Object(u.a)(c,2),s=o[0],r=o[1],d=Object(a.useState)(!1),j=Object(u.a)(d,2),m=j[0],x=j[1],p=Object(a.useState)([]),b=Object(u.a)(p,2),O=b[0],h=b[1],f=Object(a.useState)(!1),v=Object(u.a)(f,2),_=v[0],g=v[1];return Object(a.useEffect)((function(){var a=function(){var a=Object(l.a)(i.a.mark((function a(){var c,o;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r(!0),x(!1),a.prev=2,!n){a.next=12;break}return a.next=6,E.getOwnedPosts(e,10,t);case 6:c=a.sent,h((function(e){return[].concat(Object(B.a)(e),Object(B.a)(c))})),g(c.length>0),r(!1),a.next=18;break;case 12:return a.next=14,E.getAllPosts(e,10,t);case 14:o=a.sent,h((function(e){return[].concat(Object(B.a)(e),Object(B.a)(o))})),g(o.length>0),r(!1);case 18:a.next=23;break;case 20:a.prev=20,a.t0=a.catch(2),x(!0);case 23:case"end":return a.stop()}}),a,null,[[2,20]])})));return function(){return a.apply(this,arguments)}}();a()}),[e,t]),{loading:s,error:m,posts:O,hasMore:_}}var M=n(12),F=n.n(M),L=n(4),z=(n(24),n(22)),H=n(9),J=n(21),D=n(32);L.a.configure({autoClose:2e3});var G=function(e){var t=e.post,n=void 0===t?[]:t,c=e._id,o=e.currentPostId,s=e.title,r=e.description,d=e.image,j=e.user,m=e.likes,x=void 0===m?[]:m,b=e.comments,O=void 0===b?[]:b,h=e.addLike,f=void 0===h?function(){}:h,v=e.addFav,_=void 0===v?function(){}:v,g=e.toggleStatus,N=void 0===g?function(){}:g,P=e.editPost,k=void 0===P?function(){}:P,w=e.addComment,S=void 0===w?function(){}:w,T=e.typeRole,C=(e.userName,e.currentUsername),I=(e.post_status,Object(a.useState)(!1)),y=Object(u.a)(I,2),E=y[0],A=y[1],R=Object(a.useState)([]),B=Object(u.a)(R,2),U=B[0],M=B[1],G=Object(a.useState)(!1),Q=Object(u.a)(G,2),Y=Q[0],K=Q[1],W=Object(a.useState)(""),q=Object(u.a)(W,2),X=q[0],Z=q[1],V=Object(a.useState)(!0),$=Object(u.a)(V,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),ae=Object(u.a)(ne,2),ce=ae[0],oe=ae[1];Object(a.useEffect)((function(){x.forEach((function(e){e.username===C&&A(!0)}))}),[x,C,N,n]),Object(a.useEffect)((function(){M(O)}),[O]);var se=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{X.length>8?S(X)&&Z(""):L.a.error("El Comentario debe contener como minimo 8 caracteres")}catch(n){L.a.error("error")}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){return E?Object(p.jsxs)("div",{className:F.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:F.a["toast-icon-notification-container"],children:Object(p.jsx)(H.e,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:F.a["toast-notification-text-container"],children:Object(p.jsxs)("p",{children:[" Like quitado al post de ",j.username," "]})})]}):Object(p.jsxs)("div",{className:F.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:F.a["toast-icon-notification-container"],children:Object(p.jsx)(H.h,{className:"text-2xl m-auto"})}),Object(p.jsx)("div",{className:F.a["toast-notification-text-container"],children:Object(p.jsxs)("p",{children:[" Like al post de ",j.username," "]})})]})};return Object(p.jsxs)("div",{className:F.a["posts-container-general"],children:[Object(p.jsxs)("div",{className:F.a["username-post-container"],children:[Object(p.jsx)(J.b,{className:"user-icon mr-2 iphone:text-5xl ipad:text-6xl PC:text-7xl text-blue-400 border-2 rounded-full border-blue-500 shadow-md"}),Object(p.jsx)("h3",{children:j.username})]}),Object(p.jsx)("div",{className:F.a["title-post-container"],children:Object(p.jsx)("h1",{children:s})}),Object(p.jsx)("div",{className:F.a["img-post-container"],children:Object(p.jsx)("img",{src:d,alt:s})}),Object(p.jsx)("div",{className:F.a["description-post-container"],children:Object(p.jsx)("p",{children:r})}),Object(p.jsxs)("div",{className:"flex flex-col",children:[Object(p.jsxs)("div",{className:"flex justify-end px-4 pb-4",children:["admin"===T&&C===j.username?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"".concat(Y?"hidden":"show"),children:Object(p.jsx)("div",{className:F.a["fav-container"],children:Object(p.jsx)("button",{onClick:function(){c===o&&k(c,s,r,d)},children:Object(p.jsx)(H.f,{className:"card-icons edit-icon mx-2 iphone:text-2xl  laptop:text-3xl"})})})}),Object(p.jsx)("div",{className:"".concat(Y?"hidden":"show"),children:Object(p.jsx)("div",{className:F.a["fav-container"],children:Object(p.jsx)("button",{onClick:function(){N(ee),te(!ee),console.log(ee)},children:ee?Object(p.jsx)(H.g,{className:"card-icons delete-icon mx-2 iphone:text-2xl  laptop:text-3xl"}):Object(p.jsx)(z.b,{className:"card-icons delete-icon mx-2 iphone:text-2xl  laptop:text-3xl"})})})})]}):"",Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:F.a["footer-post-container"],children:[Object(p.jsxs)("div",{className:F.a["likes-container"],children:[x.length>0?Object(p.jsx)("p",{className:F.a["lenght-container"],children:x.length}):Object(p.jsx)("p",{className:F.a["lenght-container"],children:"0"}),Object(p.jsx)("button",{onClick:function(){f(E),A(!E),Object(L.a)(Object(p.jsx)(re,{}),{position:L.a.POSITION.BOTTOM_CENTER})},children:E?Object(p.jsx)(H.h,{className:"card-icons like-icon mx-2 iphone:text-2xl laptop:text-3xl  m-auto"}):Object(p.jsx)(H.i,{className:"card-icons like-icon mx-2 iphone:text-2xl laptop:text-3xl m-auto"})})]}),Object(p.jsxs)("div",{className:F.a["comments-container"],children:[O.length>0?Object(p.jsx)("p",{className:F.a["lenght-container"],children:O.length}):Object(p.jsx)("p",{className:F.a["lenght-container"],children:"0"}),Object(p.jsx)("button",{onClick:function(){M(O),K(!Y)},children:Object(p.jsx)(H.d,{className:"card-icons comment-icon mx-2 iphone:text-2xl  laptop:text-3xl  m-auto"})})]}),Object(p.jsx)("div",{className:"".concat(Y?"hidden":"show"),children:Object(p.jsx)("div",{className:F.a["fav-container"],children:Object(p.jsx)("button",{onClick:function(){_(c,ce),oe(!ce)},children:ce?Object(p.jsx)(D.a,{className:"card-icons addcomment-icon mx-2 iphone:text-2xl  laptop:text-3xl m-auto text-red-600"}):Object(p.jsx)(D.a,{className:"card-icons addcomment-icon mx-2 iphone:text-2xl  laptop:text-3xl m-auto text-red-200"})})})})]})})]}),Object(p.jsxs)("div",{className:"".concat(Y?"show":"hidden"),children:[Object(p.jsx)("p",{className:F.a["title-add-comment"],children:"Agrega un comentario:"}),Object(p.jsxs)("form",{onSubmit:se,className:F.a["form-add-comment"],children:[Object(p.jsx)("input",{type:"text",className:F.a["input-add-comment"],value:X,onChange:function(e){return function(e,t){t(e.target.value)}(e,Z)}}),Object(p.jsx)("button",{type:"submit",className:F.a["button-add-comment"],children:"Publicar comentario"})]}),U.map((function(e){return Object(p.jsxs)("div",{className:F.a["post-comment"],children:[Object(p.jsxs)("h1",{children:[" ",e.user.username," "]}),Object(p.jsx)("p",{children:e.description})]})}))]})]})]})},Q=n(7),Y=n.n(Q),K=n(23),W=n(29),q=n(30),X=n(19);function Z(){var e=Object(d.g)(),t=h().logout,n=h(),c=n.token,o=n.user,s=Object(a.useState)(""),r=Object(u.a)(s,2),m=r[0],x=r[1],b=Object(a.useState)(""),O=Object(u.a)(b,2),f=O[0],v=O[1],_=Object(a.useState)(""),N=Object(u.a)(_,2),P=N[0],k=N[1],w=function(e,t){t(e.target.value)},S=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!(m.length>=8&&m.length<=32&&f.length>=8&&""!==P)){e.next=9;break}return e.next=5,E.createPost(c,m,f,P);case 5:e.sent&&(x(""),v(""),k(""),me()),e.next=10;break;case 9:""===m&&""===f&&""===P?L.a.error("No se han ingresado datos"):m.length<8||m.length>32?L.a.error("Titulo debe tener entre 8 y 32 caracteres"):f.length<8?L.a.error("La descripci\xf3n debe tener al menos 8 caracteres"):""===P&&L.a.error("La imagen debe ser un url");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("error");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),T=Object(a.useState)(0),C=Object(u.a)(T,2),I=C[0],y=C[1],A=Object(a.useState)([]),R=Object(u.a)(A,2),B=(R[0],R[1]),M=U(c,I,!1),F=M.posts,z=M.hasMore,D=M.loading,Q=M.error,Z=Object(a.useRef)(),V=Object(a.useCallback)((function(e){D||(Z.current&&Z.current.disconnect(),Z.current=new IntersectionObserver((function(e){e[0].isIntersecting&&z&&y((function(e){return e+1}))})),e&&Z.current.observe(e))}),[D,z]),$=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.like(c,t);case 2:a=e.sent,console.log(a.message),"Post updated"===a.message&&(s=F.map((function(e){return e._id===t&&(n?e.likes.splice(e.likes.indexOf(o.username),1):e.likes.push({username:o.username})),e})),B(s));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.favorite(c,t);case 2:"Post updated"===e.sent&&(n=F.map((function(e){if(e._id===t)return e.favorites.includes(o.username)?(e.favorites.splice(e.favorites.indexOf(o.username),1),je()):(e.favorites.push(o.username),de()),e;B(n)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.toggleActivePost(c,t);case 2:"Post updated"===e.sent.message&&(a=F.map((function(e){return e._id===t&&(n?(e.active=!1,n=!0,ue()):(e.active=!0,n=!1,xe())),e})),B(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){return Object(p.jsxs)("div",{className:Y.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:Y.a["toast-icon-notification-container"],children:Object(p.jsx)(H.l,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:Y.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Tu post es p\xfablico nuevamente "})})]})},ae=function(){var e=Object(l.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.addComment(c,t,n);case 2:"Post updated"===e.sent.message&&pe();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();L.a.configure({autoClose:2e3});var ce=function(){return Object(p.jsxs)("div",{className:Y.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:Y.a["toast-icon-notification-container"],children:Object(p.jsx)(H.a,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:Y.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Tu post se ha publicado "})})]})},oe=function(){return Object(p.jsxs)("div",{className:Y.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:Y.a["toast-icon-notification-container"],children:Object(p.jsx)(K.a,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:Y.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Has cerrado la sesi\xf3n"})})]})},se=function(){return Object(p.jsxs)("div",{className:Y.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:Y.a["toast-icon-notification-container"],children:Object(p.jsx)(H.j,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:Y.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Tu post se ha ocultado "})})]})},re=function(){return Object(p.jsxs)("div",{className:Y.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:Y.a["toast-icon-notification-container"],children:Object(p.jsx)(H.k,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:Y.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Se ha agregado a favoritos "})})]})},ie=function(){return Object(p.jsxs)("div",{className:Y.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:Y.a["toast-icon-notification-container"],children:Object(p.jsx)(H.c,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:Y.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Se ha eliminado de favoritos "})})]})},le=function(){return Object(p.jsxs)("div",{className:Y.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:Y.a["toast-icon-notification-container"],children:Object(p.jsx)(H.b,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:Y.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Se ha publicado tu comentario "})})]})},ue=function(){return Object(L.a)(Object(p.jsx)(se,{}),{position:L.a.POSITION.BOTTOM_CENTER})},de=function(){return Object(L.a)(Object(p.jsx)(re,{}),{position:L.a.POSITION.BOTTOM_CENTER})},je=function(){return Object(L.a)(Object(p.jsx)(ie,{}),{position:L.a.POSITION.BOTTOM_CENTER})},me=function(){return Object(L.a)(Object(p.jsx)(ce,{}),{position:L.a.POSITION.BOTTOM_CENTER})},xe=function(){return Object(L.a)(Object(p.jsx)(ne,{}),{position:L.a.POSITION.BOTTOM_CENTER})},pe=function(){return Object(L.a)(Object(p.jsx)(le,{}),{position:L.a.POSITION.BOTTOM_CENTER})};return Object(p.jsxs)("section",{className:Y.a["section-container"],children:[Object(p.jsxs)("header",{className:Y.a["header-admin"],children:[Object(p.jsxs)("div",{className:Y.a["header-admin__logo"],children:[Object(p.jsx)("img",{className:Y.a["logo-header"],src:g,alt:"logo"}),Object(p.jsx)("p",{className:Y.a["title-header"],children:" One Moment "})]}),Object(p.jsxs)("div",{className:Y.a["logout-container"],children:[Object(p.jsxs)("h1",{className:Y.a["user-title"],children:["Admin: ",o.username]}),Object(p.jsx)("button",{onClick:function(){window.location.reload()},children:Object(p.jsx)(W.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-blue-500"})}),Object(p.jsx)("button",{onClick:function(){localStorage.setItem("username",o.username),e("/favorites")},children:Object(p.jsx)(J.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-blue-500"})}),Object(p.jsx)("button",{onClick:function(){localStorage.setItem("username",o.username),e("/ownposts")},children:Object(p.jsx)(q.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-blue-500"})}),Object(p.jsx)("button",{onClick:function(){null!==localStorage.getItem("username")&&localStorage.removeItem("username"),t(),e("/login"),Object(L.a)(Object(p.jsx)(oe,{}),{position:L.a.POSITION.BOTTOM_CENTER})},children:Object(p.jsx)(X.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-red-500"})})]})]}),Object(p.jsxs)("div",{className:Y.a["admin-container"],children:[Object(p.jsx)("section",{classes:Y.a["post-container"],children:Object(p.jsxs)("form",{onSubmit:S,className:Y.a["form-createPost"],children:[Object(p.jsx)("h2",{className:Y.a["createPost-title"],children:"Nuevo post"}),Object(p.jsxs)("div",{className:Y.a["input-container"],children:[Object(p.jsx)("label",{className:Y.a["title-section"],children:"T\xedtulo:"}),Object(p.jsx)("input",{className:Y.a["title-input"],type:"text",value:m,placeholder:"e.g. post title",onChange:function(e){return w(e,x)}})]}),Object(p.jsxs)("div",{className:Y.a["input-container"],children:[Object(p.jsx)("label",{className:Y.a["title-section"],children:"Descrici\xf3n:"}),Object(p.jsx)("input",{className:Y.a["description-input"],type:"text",placeholder:"e.g post description",onChange:function(e){return w(e,v)},value:f})]}),Object(p.jsxs)("div",{className:Y.a["input-container"],children:[Object(p.jsx)("label",{className:Y.a["title-section"],children:"Imagen (URL):"}),Object(p.jsx)("input",{className:Y.a["title-input"],type:"url",placeholder:"e.g https://Something.image.png",onChange:function(e){return w(e,k)},value:P})]}),Object(p.jsx)("div",{className:Y.a["container-createPost_button"],children:Object(p.jsx)("button",{className:Y.a["button-createPost"],children:" PUBLICAR "})})]})}),Object(p.jsxs)("section",{children:[F.map((function(t,n){return F.length===n+1?Object(p.jsx)("div",{ref:V,children:t.title},t._id):Object(p.jsx)(G,Object(j.a)(Object(j.a)({},t),{},{currentPostId:t._id,token:c,addLike:function(e){return $(t._id,e)},addFav:function(){return ee(t._id)},toggleStatus:function(){return te(t._id,t.status)},editPost:function(){return n=t._id,a=t.title,c=t.description,o=t.image,localStorage.setItem("idPost",n),localStorage.setItem("titlePost",a),localStorage.setItem("descriptionPost",c),localStorage.setItem("imagePost",o),null!==localStorage.getItem("username")&&localStorage.removeItem("username"),void e("/editpost");var n,a,c,o},addComment:function(e){return ae(t._id,e)},typeRole:o.role,userName:o.name,currentUsername:o.username,likes:t.likes}),t._id)})),Object(p.jsx)("div",{children:D&&"Loading..."}),Object(p.jsx)("div",{children:Q&&"Error"})]})]})]})}var V=n(14),$=n.n(V);function ee(){var e=Object(d.g)(),t=h().logout;L.a.configure({autoClose:2e3});var n=function(){return Object(p.jsxs)("div",{className:$.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:$.a["toast-icon-notification-container"],children:Object(p.jsx)(K.a,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:$.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Has cerrado la sesi\xf3n"})})]})},c=function(){return Object(p.jsxs)("div",{className:$.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:$.a["toast-icon-notification-container"],children:Object(p.jsx)(H.k,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:$.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Se ha agregado a favoritos "})})]})},o=function(){return Object(p.jsxs)("div",{className:$.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:$.a["toast-icon-notification-container"],children:Object(p.jsx)(H.c,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:$.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Se ha eliminado de favoritos "})})]})},s=h(),r=s.token,m=s.user,x=Object(a.useState)(0),b=Object(u.a)(x,2),O=b[0],f=b[1],v=Object(a.useState)([]),_=Object(u.a)(v,2),N=(_[0],_[1]),P=U(r,O,!1),k=P.posts,w=P.hasMore,S=P.loading,T=P.error,C=Object(a.useRef)(),I=Object(a.useCallback)((function(e){S||(C.current&&C.current.disconnect(),C.current=new IntersectionObserver((function(e){e[0].isIntersecting&&w&&f((function(e){return e+1}))})),e&&C.current.observe(e))}),[S,w]),y=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,c,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.like(r,t);case 2:a=e.sent,c=a.message,console.log(c),"Post updated"===c&&(o=k.map((function(e){return e._id===t&&(n?e.likes.splice(e.likes.indexOf(m.username),1):e.likes.push({username:m.username})),e})),N(o)),s=n?"Has removido tu like":"Has dado like",console.log(s);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.favorite(r,t);case 2:"Post updated"===e.sent&&(n=k.forEach((function(e){if(e._id===t)return e.favorites.includes(m.username)?(e.favorites.splice(e.favorites.indexOf(m.username),1),Object(L.a)(Object(p.jsx)(o,{}),{position:L.a.POSITION.BOTTOM_CENTER})):(e.favorites.push(m.username),Object(L.a)(Object(p.jsx)(c,{}),{position:L.a.POSITION.BOTTOM_CENTER})),e;N(n)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.addComment(r,t,n);case 2:"Post updated"===e.sent.message&&M();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){return Object(p.jsxs)("div",{className:$.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:$.a["toast-icon-notification-container"],children:Object(p.jsx)(H.b,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:$.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Se ha publicado tu comentario "})})]})},M=function(){return Object(L.a)(Object(p.jsx)(B,{}),{position:L.a.POSITION.BOTTOM_CENTER})};return Object(p.jsxs)("section",{className:$.a["section-container"],children:[Object(p.jsxs)("header",{className:$.a["header-user"],children:[Object(p.jsxs)("div",{className:$.a["header-user__logo"],children:[Object(p.jsx)("img",{className:$.a["logo-header"],src:g,alt:"logo"}),Object(p.jsx)("p",{className:$.a["title-header"],children:" One Moment "})]}),Object(p.jsxs)("div",{className:$.a["logout-container"],children:[Object(p.jsxs)("h1",{className:$.a["user-title"],children:["Admin: ",m.username]}),Object(p.jsx)("button",{onClick:function(){window.location.reload()},children:Object(p.jsx)(W.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-blue-500"})}),Object(p.jsx)("button",{onClick:function(){localStorage.setItem("username",m.username),e("/favorites")},children:Object(p.jsx)(J.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-blue-500"})}),Object(p.jsx)("button",{onClick:function(){t(),e("/login"),Object(L.a)(Object(p.jsx)(n,{}),{position:L.a.POSITION.BOTTOM_CENTER})},children:Object(p.jsx)(X.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-red-500"})})]})]}),Object(p.jsx)("div",{className:$.a["user-container"],children:Object(p.jsxs)("div",{children:[k.map((function(e,t){return k.length===t+1?Object(p.jsx)("div",{ref:I,children:e.title},e._id):Object(p.jsx)(G,Object(j.a)(Object(j.a)({},e),{},{token:r,addLike:function(t){return y(e._id,t)},addFav:function(){return A(e._id)},addComment:function(t){return R(e._id,t)},typeRole:m.role,userName:m.username,currentUsername:m.username}),e._id)})),Object(p.jsx)("div",{children:S&&"Loading..."}),Object(p.jsx)("div",{children:T&&"Error"})]})})]})}var te=n(10),ne=n.n(te);function ae(){var e=Object(d.g)(),t=h().token,n=Object(a.useState)(""),c=Object(u.a)(n,2),o=c[0],s=c[1],r=Object(a.useState)(""),j=Object(u.a)(r,2),m=j[0],x=j[1],b=Object(a.useState)(""),O=Object(u.a)(b,2),f=O[0],v=O[1],_=Object(a.useState)(""),N=Object(u.a)(_,2),P=N[0],k=N[1];L.a.configure({autoClose:3e3}),Object(a.useEffect)((function(){s(localStorage.getItem("idPost")),x(localStorage.getItem("titlePost")),v(localStorage.getItem("descriptionPost")),k(localStorage.getItem("imagePost"))}),[]);var w=function(e,t){t(e.target.value)},S=function(){return Object(p.jsxs)("div",{className:ne.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:ne.a["toast-icon-notification-container"],children:Object(p.jsx)(H.a,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:ne.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Tu post se ha actualizado "})})]})},T=function(){var n=Object(l.a)(i.a.mark((function n(a){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a.preventDefault();try{E.updatePost(t,o,m,f,P)&&(x(""),v(""),k(""),localStorage.removeItem("idPost"),localStorage.removeItem("titlePost"),localStorage.removeItem("descriptionPost"),localStorage.removeItem("imagePost"),Object(L.a)(Object(p.jsx)(S,{}),{position:L.a.POSITION.BOTTOM_CENTER}),e("/admin"))}catch(c){console.error("error")}case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),C=function(){localStorage.removeItem("idPost"),localStorage.removeItem("titlePost"),localStorage.removeItem("descriptionPost"),localStorage.removeItem("imagePost"),e("/admin")};return Object(p.jsxs)("div",{className:ne.a["update-post"],children:[Object(p.jsxs)("header",{className:ne.a["header-update"],children:[Object(p.jsxs)("div",{className:ne.a["header-update__logo"],children:[Object(p.jsx)("img",{className:ne.a["logo-header"],src:g,alt:"logo"}),Object(p.jsx)("p",{className:ne.a["title-header"],children:" One Moment "})]}),Object(p.jsxs)("div",{className:ne.a["logout-container"],children:[Object(p.jsx)("h1",{className:ne.a["user-title"],children:"Regresar"}),Object(p.jsx)("button",{onClick:C,children:Object(p.jsx)(z.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-blue-500"})})]})]}),Object(p.jsx)("section",{className:ne.a.update,children:Object(p.jsxs)("div",{className:ne.a["update-container"],children:[Object(p.jsx)("div",{className:ne.a["update-title"],children:Object(p.jsx)("h2",{children:"Update Post"})}),Object(p.jsx)("section",{classes:ne.a["post-container"],children:Object(p.jsxs)("form",{onSubmit:T,className:ne.a["form-createPost"],children:[Object(p.jsx)("h2",{className:ne.a["createPost-title"],children:"Nuevo post"}),Object(p.jsxs)("div",{className:ne.a["input-container"],children:[Object(p.jsx)("label",{className:ne.a["title-section"],children:"T\xedtulo:"}),Object(p.jsx)("input",{className:ne.a["title-input"],type:"text",value:m,placeholder:"e.g. post title",onChange:function(e){return w(e,x)}})]}),Object(p.jsxs)("div",{className:ne.a["input-container"],children:[Object(p.jsx)("label",{className:ne.a["title-section"],children:"Descrici\xf3n:"}),Object(p.jsx)("input",{className:ne.a["description-input"],type:"text",placeholder:"e.g post description",onChange:function(e){return w(e,v)},value:f})]}),Object(p.jsxs)("div",{className:ne.a["input-container"],children:[Object(p.jsx)("label",{className:ne.a["title-section"],children:"Imagen (URL):"}),Object(p.jsx)("input",{className:ne.a["title-input"],type:"url",placeholder:"e.g https://Something.image.png",onChange:function(e){return w(e,k)},value:P})]}),Object(p.jsx)("div",{className:ne.a["container-createPost_button"],children:Object(p.jsx)("button",{className:ne.a["button-createPost"],children:" PUBLICAR "})}),Object(p.jsx)("button",{className:ne.a["button-cancel-createPost"],onClick:function(){return C()},children:"Cancelar"})]})})]})})]})}var ce=n(13),oe=n.n(ce);function se(){L.a.configure({autoClose:2e3});var e=Object(d.g)(),t=h(),n=t.token,c=t.user,o=t.logout,s=Object(a.useState)([]),r=Object(u.a)(s,2),m=r[0],x=r[1];Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.getAllFavorite(n);case 2:t=e.sent,a=t.filter((function(e){return void 0!==e})),x(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var b=function(){var e=Object(l.a)(i.a.mark((function e(t,a){var o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.like(n,t);case 2:o=e.sent,console.log(o.message),"Post updated"===o.message&&(s=m.map((function(e){return e._id===t&&(a?e.likes.splice(e.likes.indexOf(c.username),1):e.likes.push({username:c.username})),e})),x(s));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.favorite(n,t);case 2:"Post updated"===e.sent&&(a=m.map((function(e){if(e._id===t)return e.favorites.includes(c.username)?(e.favorites.splice(e.favorites.indexOf(c.username),1),w()):(e.favorites.push(c.username),k()),e;x(a)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(l.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.addComment(n,t,a);case 2:"Post updated"===e.sent.message&&S();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){return Object(p.jsxs)("div",{className:oe.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:oe.a["toast-icon-notification-container"],children:Object(p.jsx)(K.a,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:oe.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Has cerrado la sesi\xf3n"})})]})},_=function(){return Object(p.jsxs)("div",{className:oe.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:oe.a["toast-icon-notification-container"],children:Object(p.jsx)(H.k,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:oe.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Se ha agregado a favoritos "})})]})},N=function(){return Object(p.jsxs)("div",{className:oe.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:oe.a["toast-icon-notification-container"],children:Object(p.jsx)(H.c,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:oe.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Se ha eliminado de favoritos "})})]})},P=function(){return Object(p.jsxs)("div",{className:oe.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:oe.a["toast-icon-notification-container"],children:Object(p.jsx)(H.b,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:oe.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Se ha publicado tu comentario "})})]})},k=function(){return Object(L.a)(Object(p.jsx)(_,{}),{position:L.a.POSITION.BOTTOM_CENTER})},w=function(){return Object(L.a)(Object(p.jsx)(N,{}),{position:L.a.POSITION.BOTTOM_CENTER})},S=function(){return Object(L.a)(Object(p.jsx)(P,{}),{position:L.a.POSITION.BOTTOM_CENTER})};return Object(p.jsxs)("div",{className:oe.a.favorites,children:[Object(p.jsxs)("header",{className:oe.a["header-favorites"],children:[Object(p.jsxs)("div",{className:oe.a["header-favorites__logo"],children:[Object(p.jsx)("img",{className:oe.a["logo-header"],src:g,alt:"logo"}),Object(p.jsx)("p",{className:oe.a["title-header"],children:" One Moment "})]}),Object(p.jsxs)("div",{className:oe.a["logout-container"],children:[Object(p.jsxs)("h1",{className:oe.a["user-title"],children:["Post favoritos de: ",localStorage.getItem("username")]}),Object(p.jsx)("button",{className:"".concat("user"===c.role?"hidden":"show"),onClick:function(){localStorage.removeItem("username"),e("/ownposts")},children:Object(p.jsx)(q.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-blue-500"})}),Object(p.jsx)("button",{onClick:function(){"admin"===c.role?(localStorage.removeItem("username"),e("/admin")):"user"===c.role&&(localStorage.removeItem("username"),e("/user"))},children:Object(p.jsx)(z.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-blue-500"})}),Object(p.jsx)("button",{onClick:function(){o(),localStorage.removeItem("username"),e("/login"),Object(L.a)(Object(p.jsx)(v,{}),{position:L.a.POSITION.BOTTOM_CENTER})},children:Object(p.jsx)(X.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-red-500"})})]})]}),Object(p.jsx)("div",{className:oe.a["favorites-container"],children:m.map((function(e){return Object(p.jsx)(G,Object(j.a)(Object(j.a)({post:e},e),{},{currentPostId:e._id,token:n,addLike:function(t){return b(e._id,t)},addFav:function(){return O(e._id)},addComment:function(t){return f(e._id,t)},typeRole:c.role,userName:c.username,currentUsername:c.username,likes:e.likes}),e._id)}))})]})}var re=n(11),ie=n.n(re);function le(){L.a.configure({autoClose:2e3});var e=Object(d.g)(),t=h().logout,n=h(),c=n.token,o=n.user,s=Object(a.useState)(0),r=Object(u.a)(s,2),m=r[0],x=r[1],b=Object(a.useState)([]),O=Object(u.a)(b,2),f=(O[0],O[1]),v=U(c,m,!0),_=v.posts,N=v.hasMore,P=v.loading,k=v.error,w=Object(a.useRef)(),S=Object(a.useCallback)((function(e){P||(w.current&&w.current.disconnect(),w.current=new IntersectionObserver((function(e){e[0].isIntersecting&&N&&x((function(e){return e+1}))})),e&&w.current.observe(e))}),[P,N]),T=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.like(c,t);case 2:a=e.sent,console.log(a.message),"Post updated"===a.message&&(s=_.map((function(e){return e._id===t&&(n?e.likes.splice(e.likes.indexOf(o.username),1):e.likes.push({username:o.username})),e})),f(s));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.favorite(c,t);case 2:"Post updated"===e.sent&&(n=_.forEach((function(e){if(e._id===t)return e.favorites.includes(o.username)?(e.favorites.splice(e.favorites.indexOf(o.username),1),q()):(e.favorites.push(o.username),W()),e;f(n)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.toggleActivePost(c,t);case 2:"Post updated"===e.sent.message&&(a=_.map((function(e){return e._id===t&&(n?(e.active=!1,n=!0,Q()):(e.active=!0,n=!1,Y())),e})),f(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.addComment(c,t,n);case 2:"Post updated"===e.sent.message&&Z();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){return Object(p.jsxs)("div",{className:ie.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:ie.a["toast-icon-notification-container"],children:Object(p.jsx)(K.a,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:ie.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Has cerrado la sesi\xf3n"})})]})},R=function(){return Object(p.jsxs)("div",{className:ie.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:ie.a["toast-icon-notification-container"],children:Object(p.jsx)(H.j,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:ie.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Tu post se ha ocultado "})})]})},B=function(){return Object(p.jsxs)("div",{className:ie.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:ie.a["toast-icon-notification-container"],children:Object(p.jsx)(H.k,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:ie.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Se ha agregado a favoritos "})})]})},M=function(){return Object(p.jsxs)("div",{className:ie.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:ie.a["toast-icon-notification-container"],children:Object(p.jsx)(H.c,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:ie.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Se ha eliminado de favoritos "})})]})},F=function(){return Object(p.jsxs)("div",{className:ie.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:ie.a["toast-icon-notification-container"],children:Object(p.jsx)(H.l,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:ie.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Tu post es p\xfablico nuevamente "})})]})},D=function(){return Object(p.jsxs)("div",{className:ie.a["toast-notification-container"],children:[Object(p.jsx)("div",{className:ie.a["toast-icon-notification-container"],children:Object(p.jsx)(H.b,{className:"text-2xl m-auto "})}),Object(p.jsx)("div",{className:ie.a["toast-notification-text-container"],children:Object(p.jsx)("p",{children:" Se ha publicado tu comentario "})})]})},Q=function(){return Object(L.a)(Object(p.jsx)(R,{}),{position:L.a.POSITION.BOTTOM_CENTER})},Y=function(){return Object(L.a)(Object(p.jsx)(F,{}),{position:L.a.POSITION.BOTTOM_CENTER})},W=function(){return Object(L.a)(Object(p.jsx)(B,{}),{position:L.a.POSITION.BOTTOM_CENTER})},q=function(){return Object(L.a)(Object(p.jsx)(M,{}),{position:L.a.POSITION.BOTTOM_CENTER})},Z=function(){return Object(L.a)(Object(p.jsx)(D,{}),{position:L.a.POSITION.BOTTOM_CENTER})};return Object(p.jsxs)("div",{className:ie.a.ownposts,children:[Object(p.jsxs)("header",{className:ie.a["header-ownposts"],children:[Object(p.jsxs)("div",{className:ie.a["header-ownposts__logo"],children:[Object(p.jsx)("img",{className:ie.a["logo-header"],src:g,alt:"logo"}),Object(p.jsx)("p",{className:ie.a["title-header"],children:" One Moment "})]}),Object(p.jsxs)("div",{className:ie.a["logout-container"],children:[Object(p.jsxs)("h1",{className:ie.a["user-title"],children:["Post hechos por: ",localStorage.getItem("username")]}),Object(p.jsx)("button",{onClick:function(){localStorage.setItem("username",o.username),e("/favorites")},children:Object(p.jsx)(J.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-blue-500"})}),Object(p.jsx)("button",{onClick:function(){null!==localStorage.getItem("username")&&localStorage.removeItem("username"),e("/admin")},children:Object(p.jsx)(z.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-blue-500"})}),Object(p.jsx)("button",{onClick:function(){t(),null!==localStorage.getItem("username")&&localStorage.removeItem("username"),e("/login"),Object(L.a)(Object(p.jsx)(A,{}),{position:L.a.POSITION.BOTTOM_CENTER})},children:Object(p.jsx)(X.a,{className:"admin-icons home-icon mx-2 iphone:text-xl ipad:text-2xl laptop:text-5xl m-auto text-red-500"})})]})]}),Object(p.jsx)("section",{className:ie.a["ownposts-container"],children:Object(p.jsxs)("section",{className:ie.a["ownposts-container-posts"],children:[_.map((function(t,n){return _.length===n+1?Object(p.jsx)("div",{ref:S,children:t.title},t._id):Object(p.jsx)(G,Object(j.a)(Object(j.a)({},t),{},{currentPostId:t._id,token:c,addLike:function(e){return T(t._id,e)},addFav:function(){return C(t._id)},toggleStatus:function(){return I(t._id,t.active)},editPost:function(){return n=t._id,a=t.title,c=t.description,o=t.image,localStorage.setItem("idPost",n),localStorage.setItem("titlePost",a),localStorage.setItem("descriptionPost",c),localStorage.setItem("imagePost",o),null!==localStorage.getItem("username")&&localStorage.removeItem("username"),void e("/editpost");var n,a,c,o},addComment:function(e){return y(t._id,e)},typeRole:o.role,userName:o.username,currentUsername:o.username,post_status:t.active}),t._id)})),Object(p.jsx)("div",{children:P&&"Loading..."}),Object(p.jsx)("div",{children:k&&"Error"})]})})]})}var ue=function(e){var t=e.role,n=void 0===t?"user":t,a=e.children,c=h(),o=c.token,s=c.user;return o?s&&s.role===n?a:Object(p.jsx)(d.a,{replace:!0,to:"/404"}):Object(p.jsx)(d.a,{replace:!0,to:"/login"})},de=(n(40),n(18));var je=function(){return Object(p.jsx)(de.a,{children:Object(p.jsxs)(d.d,{children:[Object(p.jsx)(d.b,{path:"/login",element:Object(p.jsx)(P,{})}),Object(p.jsx)(d.b,{path:"/redirect",element:Object(p.jsx)(w,{})}),Object(p.jsx)(d.b,{path:"/admin",element:Object(p.jsx)(ue,{role:"admin",children:Object(p.jsx)(Z,{})})}),Object(p.jsx)(d.b,{path:"/editpost",element:Object(p.jsx)(ae,{})}),Object(p.jsx)(d.b,{path:"/favorites",element:Object(p.jsx)(se,{})}),Object(p.jsx)(d.b,{path:"/ownposts",element:Object(p.jsx)(le,{})}),Object(p.jsx)(d.b,{path:"/user",element:Object(p.jsxs)(ue,{role:"user",children:[" ",Object(p.jsx)(ee,{})," "]})}),Object(p.jsx)(d.b,{path:"*",element:Object(p.jsx)(I,{})})]})})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(O,{children:Object(p.jsx)(je,{})})}),document.getElementById("root")),me()}],[[41,1,2]]]);
//# sourceMappingURL=main.2cfe06ee.chunk.js.map